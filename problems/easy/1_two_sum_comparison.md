# Two Sum - 解法比較

## 概要

Two Sum 問題の 6 つの異なるアプローチを比較します。

## 各解法の特徴

### 1. ハッシュマップ法 (`twoSum1`)

**特徴**: 最も効率的で推奨される解法

- **時間複雑度**: O(n)
- **空間複雑度**: O(n)
- **利点**:
  - 最も高速
  - 理解しやすい
  - 実装がシンプル
- **欠点**: ハッシュマップのオーバーヘッド

### 2. ソート + 双方向ポインタ法 (`twoSum2`)

**特徴**: メモリ使用量を重視する場合

- **時間複雑度**: O(n log n)
- **空間複雑度**: O(n)
- **利点**:
  - インデックス順序を保証
  - メモリ使用量が予測可能
  - ソートの利点を活用
- **欠点**: ソートのオーバーヘッド

### 3. ブルートフォース法 (`twoSum3`)

**特徴**: 学習用、理解しやすい

- **時間複雑度**: O(n²)
- **空間複雑度**: O(1)
- **利点**:
  - 最も理解しやすい
  - 追加メモリ不要
  - デバッグしやすい
- **欠点**: 非常に遅い

### 4. ハッシュマップ法（インデックス順序保証）(`twoSum4`)

**特徴**: インデックス順序を重視する場合

- **時間複雑度**: O(n)
- **空間複雑度**: O(n)
- **利点**:
  - 高速
  - インデックス順序を保証
  - 要件を完全に満たす
- **欠点**: 若干のオーバーヘッド

### 5. 早期リターン最適化版 (`twoSum5`)

**特徴**: エッジケースを考慮した最適化

- **時間複雑度**: O(n)
- **空間複雑度**: O(n)
- **利点**:
  - エッジケースの処理
  - 初期容量の指定
  - 効率的
- **欠点**: 実装が少し複雑

### 6. 構造体を使用した版 (`twoSum6`)

**特徴**: 現在の実装の改善版

- **時間複雑度**: O(n)
- **空間複雑度**: O(n)
- **利点**:
  - ゼロ値問題を解決
  - 型安全性
  - デバッグしやすい
- **欠点**: メモリ使用量が多い

## 推奨使用場面

### 一般的な用途

- **推奨**: アプローチ 1（ハッシュマップ法）
- **理由**: 最も効率的で理解しやすい

### インデックス順序が重要な場合

- **推奨**: アプローチ 4（インデックス順序保証）
- **理由**: 要件を完全に満たす

### メモリ制約が厳しい場合

- **推奨**: アプローチ 2（ソート + 双方向ポインタ）
- **理由**: メモリ使用量が予測可能

### 学習目的

- **推奨**: アプローチ 3（ブルートフォース法）
- **理由**: 最も理解しやすい

### エッジケースを重視する場合

- **推奨**: アプローチ 5（早期リターン最適化版）
- **理由**: エッジケースの処理が優れている

## ベンチマーク結果（予想）

```
小さい配列（14要素）:
1. ハッシュマップ法: ~100ns
2. 早期リターン版: ~110ns
3. インデックス順序版: ~120ns
4. 構造体版: ~150ns
5. ソート + 双方向ポインタ: ~300ns
6. ブルートフォース法: ~500ns

大きい配列（1000要素）:
1. ハッシュマップ法: ~500ns
2. 早期リターン版: ~550ns
3. インデックス順序版: ~600ns
4. 構造体版: ~700ns
5. ソート + 双方向ポインタ: ~2000ns
6. ブルートフォース法: ~50000ns
```

## アルゴリズムの選択基準

### パフォーマンス重視

- **選択**: アプローチ 1（ハッシュマップ法）
- **理由**: 最も高速

### 要件完全準拠

- **選択**: アプローチ 4（インデックス順序保証）
- **理由**: すべての要件を満たす

### 学習・理解重視

- **選択**: アプローチ 3（ブルートフォース法）
- **理由**: 最も理解しやすい

### メモリ効率重視

- **選択**: アプローチ 2（ソート + 双方向ポインタ）
- **理由**: メモリ使用量が予測可能

## 結論

- **最適解**: アプローチ 1（ハッシュマップ法）- 一般的な用途
- **完全準拠解**: アプローチ 4（インデックス順序保証）- 要件重視
- **学習解**: アプローチ 3（ブルートフォース法）- 理解重視
- **メモリ効率解**: アプローチ 2（ソート + 双方向ポインタ）- メモリ制約
